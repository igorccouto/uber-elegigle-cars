# Uber Eligible Cars Scraper

This Python script scrapes Uber's eligible vehicle data for a specified city and allows for advanced filtering based on car brands and Uber service categories. It outputs the results both to the console and to a JSON file.

## Features

- **City selection**: Scrape eligible vehicles for any supported Uber city.
- **Brand filtering**: Optionally filter results by one or more specific car brands using `--brands`. If not specified, all brands found in the data are included.
- **Category filtering**: Require or exclude specific Uber service categories (e.g., Comfort, Green, Black).
- **Structured output**: Results are printed in a readable format and saved to a JSON file with a descriptive filename.
- **Robust scraping**: Uses HTTP retries and browser-like headers for reliability.

## Requirements

- Python 3.7+
- Packages: `requests`, `beautifulsoup4`

Install dependencies with:

```sh
pip install requests beautifulsoup4
```

## Usage

```sh
python uber_elegible_cars.py [--city CITY] [--brands BRAND1,BRAND2,...] [--required-categories CAT1,CAT2,...] [--excluded-categories CAT3,CAT4,...]
```

### Arguments

- `--city`: Uber city to scrape (default: `porto`).
- `--brands`: (Optional) Comma-separated list of car brands to include (e.g., `Audi,BMW,Tesla`). If omitted, all brands found on the Uber site for the city will be included.
- `--required-categories`: Comma-separated list of categories that must be present (e.g., `Comfort,Green`).
- `--excluded-categories`: Comma-separated list of categories to exclude (e.g., `Black,UberXL`).

### Example Commands

- List all eligible cars for Lisbon:
  ```sh
  python uber_elegible_cars.py --city lisbon
  ```
- Only BMW and Tesla cars in Porto, excluding "Black" category:
  ```sh
  python uber_elegible_cars.py --city porto --brands BMW,Tesla --excluded-categories Black
  ```
- Cars that must have both Comfort and Green, but not Black:
  ```sh
  python uber_elegible_cars.py --city lisbon --required-categories Comfort,Green --excluded-categories Black
  ```

## Examples

Below is a sample of the JSON output file generated by the script for the command:

```sh
python uber_elegible_cars.py --city porto --brands BMW,Tesla --excluded-categories Black
```

Sample output (`uber_eligible_vehicles_porto_brands-BMW-Tesla_excluded-Black.json`):

```json
{
  "BMW": [
    {"model": "2-series Gran Tourer", "year": "2018", "categories": ["UberX", "Comfort"]},
    {"model": "3-Series 330e", "year": "2018", "categories": ["UberX", "Comfort"]}
    // ... more BMW cars ...
  ],
  "Tesla": [
    {"model": "Model 3", "year": "2018", "categories": ["UberX", "Comfort", "Green"]},
    {"model": "Model S", "year": "2018", "categories": ["UberX", "Comfort", "Green"]}
    // ... more Tesla cars ...
  ]
}
```

The actual output will contain all matching cars for the selected brands and filters, grouped by brand.

## Output

- Results are printed to the console, grouped by brand and model.
- Filtered results are saved as a JSON file named like:
  ```
  uber_eligible_vehicles_lisbon_brands-BMW-Tesla_required-Comfort-Green_excluded-Black.json
  ```

## Notes

- Please visit the [Uber Eligible Cars](https://www.uber.com/global/en/eligible-vehicles) site for your location to see the available categories for your city.
- If you do not use `--brands`, the script will include all brands found for your city on Uber's site.
- If you encounter HTTP errors or missing data, try again as Uber's site may change or temporarily block requests.

## License

MIT License. See [LICENSE](LICENSE) for details.
